# 实验报告

## 实验目的

最终目标是为了在不同的环境下，能够仅根据访问量/CPU占用率/内存占用率/IO等数据就完成对不同实例数时服务性能的预测（响应时间/CPU占用率等指标）

因此本实验的目的在于，探索不同流量、不同实例数下时容器的状态会发生什么样的改变

## 理论支持与期望现象

目前来说有一篇文章对这方面的研究比较深入。

一篇是Web Application Resource Requirements Estimation based on the Workload Latent Features。这篇文章着重研究的是不同的URI（请求）的混合给容器带来的不同压力。作者使用了四个不同比例混合的RUBiS流量，在相同的访问率下会得到完全不同的结果。

从这篇文章的实验中我观察到了一个现象，即在不同的阶段下容器似乎有着不同的状态。这个状态的意思是指，在不同的访问量下容器的其他指标随着访问量变动的幅度是有区别的。

在之前（五月份）的时候，我们曾经尝试对容器进行建模，去预测在具体有几个实例的时候容器的性能是什么样的，而不是说用强化学习+穷举法的思想。但是遇到的很明显的两个问题：

1. 同一个流量在不同的时候表现似乎完全不同，这可能与其前一时刻的流量访问量相关。即容器的状态似乎呈现出一种马尔科夫的性质。
2. 在同一个容器内的流量尚有预测的可能（准确度还能看），但是只要涉及到多个容器，则预测难度就会变得非常大。这方面可能要从底层进行建模，来考虑多层神经网络或者考虑变量之间的相关性。

## 实验环境

* 实验环境：kubernetes/docker+istio+prometheus监控。目前部署在华为云上的就是这一套系统，因此使用代价是最小的。
* 
* 
